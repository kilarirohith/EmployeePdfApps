@model List<EmployeeCrudPdf.Models.Product>
@{
  var q = Context.Request.Query["q"].ToString();
  int page = ViewBag.Page; int pageSize = ViewBag.PageSize; int total = ViewBag.Total;
  int totalPages = (int)Math.Ceiling((double)total / pageSize);
}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="mb-0">Products</h3>
  <a class="btn btn-primary" asp-action="Create">+ New Product</a>
</div>
<form method="get" class="row row-cols-lg-auto g-2 align-items-center mb-3">
  <div class="col-12">
    <input name="q" value="@q" class="form-control" placeholder="Search name/category" />
  </div>
  <div class="col-12"><button class="btn btn-outline-secondary" type="submit">Search</button></div>
</form>
<table class="table table-striped table-hover">
  <thead><tr><th>Id</th><th>Name</th><th class="text-end">Price</th><th>Category</th><th></th></tr></thead>
  <tbody>
  @foreach (var p in Model)
  {
    <tr>
      <td>@p.Id</td>
      <td>@p.Name</td>
      <td class="text-end">@p.Price.ToString("C")</td>
      <td>@p.Category</td>
      <td class="text-end">
        <a class="btn btn-sm btn-outline-secondary" asp-action="Details" asp-route-id="@p.Id">View</a>
        <a class="btn btn-sm btn-outline-primary" asp-action="Edit" asp-route-id="@p.Id">Edit</a>
        <a class="btn btn-sm btn-outline-danger" asp-action="Delete" asp-route-id="@p.Id">Delete</a>
      </td>
    </tr>
  }
  </tbody>
</table>
@if (totalPages > 1)
{
  <nav><ul class="pagination">
  @for (int i = 1; i <= totalPages; i++)
  {
    <li class="page-item @(i==page?"active":"")">
      <a class="page-link" href="?q=@q&page=@i&pageSize=@pageSize">@i</a>
    </li>
  }
  </ul></nav>
}