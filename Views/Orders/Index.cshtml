@model IEnumerable<EmployeeCrudPdf.Models.Order>
@{
    var q = ViewBag.Query as string;
    int page = ViewBag.Page; int pageSize = ViewBag.PageSize; int total = ViewBag.Total;
    int totalPages = (int)Math.Ceiling((double)total / pageSize);
}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="mb-0">Orders</h3>
  <a class="btn btn-primary" href="/swagger">Create via Swagger</a>
</div>

<form method="get" class="row row-cols-lg-auto g-2 align-items-center mb-3">
  <div class="col-12">
    <input name="q" value="@q" class="form-control" placeholder="Search order no..." />
  </div>
  <div class="col-12">
    <button class="btn btn-outline-secondary" type="submit">Search</button>
  </div>
</form>

<table class="table table-striped table-hover">
  <thead><tr><th>Id</th><th>Order No</th><th>Created</th><th class="text-end">Total</th><th></th></tr></thead>
  <tbody>
  @foreach (var o in Model)
  {
    <tr>
      <td>@o.Id</td>
      <td>@o.OrderNo</td>
      <td>@o.CreatedAt.ToLocalTime()</td>
      <td class="text-end">@o.Total.ToString("C")</td>
      <td class="text-end"><a class="btn btn-sm btn-outline-secondary" asp-action="Details" asp-route-id="@o.Id">View</a></td>
    </tr>
  }
  </tbody>
</table>

@if (totalPages > 1)
{
  <nav><ul class="pagination">
  @for (int i = 1; i <= totalPages; i++)
  {
    <li class="page-item @(i==page?"active":"")">
      <a class="page-link" href="?q=@q&page=@i&pageSize=@pageSize">@i</a>
    </li>
  }
  </ul></nav>
}
